ç‚¹å‡»"è¿œç¨‹è¿æ¥" -> "Workbenchè¿œç¨‹è¿æ¥<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>èµ›åšæœ‹å…‹æ¸¸æˆç«™ - é¦–é¡µåŸå‹</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
      background: linear-gradient(135deg, #0a0b13 0%, #181a24 100%);
      color: #e0e0e0;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    /* æ˜Ÿç©ºcanvasèƒŒæ™¯ */
    #star-bg {
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
      display: block;
    }
    /* æ‰«æçº¿ç‰¹æ•ˆ */
    body::before {
      content: '';
      position: fixed;
      left: 0; top: 0; right: 0; bottom: 0;
      pointer-events: none;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.01) 0px,
        rgba(255,255,255,0.01) 1px,
        transparent 2px,
        transparent 8px
      );
      z-index: 1;
    }
    /* é¡¶éƒ¨å¯¼èˆª */
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px 48px 12px 48px;
      background: rgba(10,12,24,0.95);
      box-shadow: 0 2px 12px 0 #0ff2 0.2;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .logo {
      font-size: 2.2rem;
      color: #1de9b6;
      letter-spacing: 2px;
      text-shadow: 0 0 4px #1de9b6, 0 0 8px #1de9b6a0;
      font-weight: bold;
      user-select: none;
    }
    .search-box {
      flex: 1;
      margin: 0 32px;
      position: relative;
    }
    .search-box input {
      width: 100%;
      padding: 10px 40px 10px 16px;
      border-radius: 24px;
      border: none;
      background: #181a24;
      color: #e0e0e0;
      font-size: 1rem;
      outline: none;
      box-shadow: 0 0 4px #1de9b6a0;
      transition: box-shadow 0.3s;
    }
    .search-box input:focus {
      box-shadow: 0 0 8px #1de9b6a0;
    }
    .search-icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #1de9b6;
      font-size: 1.2rem;
      pointer-events: none;
      text-shadow: 0 0 4px #1de9b6a0;
    }
    .nav-links {
      display: flex;
      gap: 24px;
    }
    .nav-link {
      color: #e0e0e0;
      text-decoration: none;
      font-size: 1.1rem;
      padding: 8px 18px;
      border-radius: 18px;
      background: rgba(30,40,60,0.7);
      box-shadow: 0 0 4px #1de9b6a0;
      transition: filter 0.2s, box-shadow 0.2s, background 0.2s;
      filter: blur(0.2px) contrast(1.1) saturate(1.2);
    }
    .nav-link:hover {
      filter: blur(0) contrast(1.3) saturate(1.5);
      box-shadow: 0 0 12px #1de9b6, 0 0 16px #536dfe80;
      background: rgba(30,40,60,0.95);
    }
    .user-btn {
      color: #e0e0e0;
      background: linear-gradient(90deg, #536dfe 10%, #1de9b6 90%);
      border: none;
      border-radius: 18px;
      padding: 8px 22px;
      font-size: 1.1rem;
      font-weight: bold;
      box-shadow: 0 0 6px #1de9b6a0, 0 0 8px #536dfe60;
      cursor: pointer;
      transition: filter 0.2s, box-shadow 0.2s;
      filter: blur(0.2px) contrast(1.1) saturate(1.2);
    }
    .user-btn:hover {
      filter: blur(0) contrast(1.3) saturate(1.5);
      box-shadow: 0 0 16px #1de9b6, 0 0 20px #536dfe;
    }
    /* BanneråŒº */
    .banner {
      margin: 32px auto 0 auto;
      max-width: 1200px;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 0 16px #1de9b6a0, 0 0 24px #536dfe40;
      position: relative;
      background: linear-gradient(120deg, #181a24 60%, #1de9b620 100%);
      min-height: 260px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .banner-content {
      color: #e0e0e0;
      text-align: center;
      z-index: 2;
      position: relative;
    }
    .banner-title {
      font-size: 2.5rem;
      color: #1de9b6;
      text-shadow: 0 0 8px #1de9b6, 0 0 16px #536dfe80;
      margin-bottom: 12px;
    }
    .banner-desc {
      font-size: 1.2rem;
      color: #e0e0e0;
      text-shadow: 0 0 4px #1de9b6a0;
      margin-bottom: 24px;
    }
    .banner-btn {
      background: linear-gradient(90deg, #536dfe 10%, #1de9b6 90%);
      color: #fff;
      border: none;
      border-radius: 18px;
      padding: 12px 32px;
      font-size: 1.2rem;
      font-weight: bold;
      box-shadow: 0 0 8px #1de9b6a0, 0 0 12px #536dfe40;
      cursor: pointer;
      transition: filter 0.2s, box-shadow 0.2s;
      filter: blur(0.2px) contrast(1.1) saturate(1.2);
    }
    .banner-btn:hover {
      filter: blur(0) contrast(1.3) saturate(1.5);
      box-shadow: 0 0 20px #1de9b6, 0 0 24px #536dfe;
    }
    /* å¤±çœŸç‰¹æ•ˆ */
    .glitch {
      position: relative;
      color: #1de9b6;
      font-size: 2.5rem;
      font-weight: bold;
      letter-spacing: 2px;
      text-shadow:
        2px 0 #536dfe,
        -2px 0 #1de9b6,
        0 2px #fff,
        0 -2px #1de9b6a0;
      animation: glitch 1.2s infinite linear alternate-reverse;
    }
    @keyframes glitch {
      0% { filter: hue-rotate(0deg) blur(0.2px); }
      20% { filter: hue-rotate(10deg) blur(0.4px); }
      40% { filter: hue-rotate(-10deg) blur(0.2px); }
      60% { filter: hue-rotate(20deg) blur(0.6px); }
      80% { filter: hue-rotate(-20deg) blur(0.2px); }
      100% { filter: hue-rotate(0deg) blur(0.2px); }
    }
    /* å†…å®¹åŒº */
    .section {
      max-width: 1200px;
      margin: 48px auto 0 auto;
      padding: 0 24px;
    }
    .section-title {
      font-size: 1.6rem;
      color: #1de9b6;
      text-shadow: 0 0 4px #1de9b6a0;
      margin-bottom: 18px;
      letter-spacing: 1px;
    }
    /* æ¸¸æˆå¡ç‰‡ */
    .game-list {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      margin-bottom: 24px;
    }
    .game-card {
      background: linear-gradient(120deg, #181a24 60%, #1de9b610 100%);
      border-radius: 18px;
      box-shadow: 0 0 8px #1de9b6a0, 0 0 12px #536dfe40;
      width: 220px;
      padding: 18px 12px 12px 12px;
      position: relative;
      overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s, filter 0.2s;
      filter: blur(0.2px) contrast(1.1) saturate(1.2);
      cursor: pointer;
    }
    .game-card:hover {
      transform: translateY(-8px) scale(1.04) rotate(-1deg);
      box-shadow: 0 0 20px #1de9b6, 0 0 24px #536dfe;
      filter: blur(0) contrast(1.3) saturate(1.5);
    }
    .game-thumb {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: 0 0 4px #1de9b6a0;
    }
    .game-title {
      font-size: 1.1rem;
      color: #e0e0e0;
      text-shadow: 0 0 3px #1de9b6a0;
      margin-bottom: 6px;
    }
    .game-tags {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }
    .game-tag {
      background: linear-gradient(90deg, #1de9b6 10%, #536dfe 90%);
      color: #fff;
      border-radius: 10px;
      padding: 2px 10px;
      font-size: 0.85rem;
      box-shadow: 0 0 4px #1de9b6a0;
      margin-bottom: 2px;
    }
    .game-btn {
      background: linear-gradient(90deg, #536dfe 10%, #1de9b6 90%);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 6px 18px;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 0 6px #1de9b6a0, 0 0 8px #536dfe40;
      cursor: pointer;
      transition: filter 0.2s, box-shadow 0.2s;
      filter: blur(0.2px) contrast(1.1) saturate(1.2);
    }
    .game-btn:hover {
      filter: blur(0) contrast(1.3) saturate(1.5);
      box-shadow: 0 0 16px #1de9b6, 0 0 20px #536dfe;
    }
    /* åˆ†ç±»å¯¼èˆªåŒº */
    .category-nav {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      margin-bottom: 24px;
      justify-content: center;
    }
    .category-item {
      background: linear-gradient(90deg, #1de9b6 10%, #536dfe 90%);
      color: #fff;
      border-radius: 16px;
      padding: 12px 32px;
      font-size: 1.1rem;
      font-weight: bold;
      box-shadow: 0 0 6px #1de9b6a0, 0 0 8px #536dfe40;
      cursor: pointer;
      margin-bottom: 8px;
      transition: filter 0.2s, box-shadow 0.2s;
      filter: blur(0.2px) contrast(1.1) saturate(1.2);
    }
    .category-item:hover {
      filter: blur(0) contrast(1.3) saturate(1.5);
      box-shadow: 0 0 16px #1de9b6, 0 0 20px #536dfe;
    }
    /* é¡µè„š */
    footer {
      margin-top: 48px;
      padding: 32px 0 16px 0;
      background: rgba(10,12,24,0.95);
      color: #888;
      text-align: center;
      font-size: 1rem;
      letter-spacing: 1px;
      border-top: 1px solid #1de9b620;
      box-shadow: 0 -2px 8px #1de9b620;
    }
    @media (max-width: 900px) {
      .navbar, .section {
        padding-left: 12px;
        padding-right: 12px;
      }
      .banner {
        min-height: 180px;
      }
      .game-list {
        flex-direction: column;
        align-items: center;
      }
      .category-nav {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <canvas id="star-bg"></canvas>
  <nav class="navbar">
    <div class="logo">CYBER<span style="color:#536dfe">GAMES</span></div>
    <div class="search-box">
      <input type="text" placeholder="æœç´¢æ¸¸æˆ/åˆ†ç±»/æ ‡ç­¾...">
      <span class="search-icon">ğŸ”</span>
    </div>
    <div class="nav-links">
      <a href="#" class="nav-link">åˆ†ç±»</a>
      <a href="#" class="nav-link">ä¸“é¢˜</a>
      <a href="#" class="nav-link">æœ€æ–°</a>
    </div>
    <button class="user-btn" id="loginBtn">ç™»å½•/æ³¨å†Œ</button>
  </nav>

  <section class="banner">
    <div class="banner-content">
      <div class="banner-title glitch">ä¸“é¢˜æ´»åŠ¨ï¼š<span style="color:#536dfe">èµ›åšç‹‚æ½®</span></div>
      <div class="banner-desc">ä½“éªŒæœ€ç‚«é…·çš„èµ›åšæœ‹å…‹é£å°æ¸¸æˆï¼Œå‚ä¸æ´»åŠ¨èµ¢å–ä¸“å±å¾½ç« ï¼</div>
      <button class="banner-btn">ç«‹å³å‚ä¸</button>
    </div>
  </section>

  <section class="section">
    <div class="section-title">ğŸ”¥ çƒ­é—¨æ¨è</div>
    <div class="game-list">
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="game1">
        <div class="game-title">éœ“è™¹ç–¾é©°</div>
        <div class="game-tags"><span class="game-tag">ç«é€Ÿ</span><span class="game-tag">èµ›åšæœ‹å…‹</span></div>
        <div style="display: flex; gap: 8px; margin-top: 8px;">
          <a href="games/hexgl/index.html" target="_blank" class="game-btn">å¼€å§‹ç© HexGL</a>
          <button class="game-btn" style="background: linear-gradient(90deg, #ff4081 10%, #ff9100 90%);">æ¨è</button>
        </div>
        <div style="margin-top: 8px; text-align: center;">
          <a href="games/hexgl/index.html" target="_blank" style="color: #1de9b6; text-decoration: none; font-size: 0.9rem; text-shadow: 0 0 4px #1de9b6a0;">ç‚¹å‡»è¿™é‡Œå¼€å§‹ç© HexGL â†’</a>
        </div>
      </div>
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="game2">
        <div class="game-title">æœªæ¥è¿·åŸ</div>
        <div class="game-tags"><span class="game-tag">å†’é™©</span><span class="game-tag">è§£è°œ</span></div>
        <div style="display: flex; gap: 8px; margin-top: 8px;">
          <button class="game-btn">å¼€å§‹æ¸¸æˆ</button>
          <button class="game-btn" style="background: linear-gradient(90deg, #ff4081 10%, #ff9100 90%);">æ¨è</button>
        </div>
      </div>
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="game3">
        <div class="game-title">å…‰å½±çŒæ‰‹</div>
        <div class="game-tags"><span class="game-tag">åŠ¨ä½œ</span><span class="game-tag">å°„å‡»</span></div>
        <div style="display: flex; gap: 8px; margin-top: 8px;">
          <button class="game-btn">å¼€å§‹æ¸¸æˆ</button>
          <button class="game-btn" style="background: linear-gradient(90deg, #ff4081 10%, #ff9100 90%);">æ¨è</button>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="section-title">ğŸ†• æœ€æ–°ä¸Šçº¿</div>
    <div class="game-list">
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1465101178521-c1a9136a3b99?auto=format&fit=crop&w=400&q=80" alt="game4">
        <div class="game-title">æ•°æ®è¿·è¸ª</div>
        <div class="game-tags"><span class="game-tag">ç›Šæ™º</span><span class="game-tag">è§£è°œ</span></div>
        <button class="game-btn">å¼€å§‹æ¸¸æˆ</button>
      </div>
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="game5">
        <div class="game-title">è™šæ‹Ÿè¾¹ç•Œ</div>
        <div class="game-tags"><span class="game-tag">æ¨¡æ‹Ÿ</span><span class="game-tag">æ²™ç›’</span></div>
        <button class="game-btn">å¼€å§‹æ¸¸æˆ</button>
      </div>
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="game6">
        <div class="game-title">ç”µéŸ³èŠ‚æ‹</div>
        <div class="game-tags"><span class="game-tag">éŸ³ä¹</span><span class="game-tag">èŠ‚å¥</span></div>
        <button class="game-btn">å¼€å§‹æ¸¸æˆ</button>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="section-title">ğŸ—‚ åˆ†ç±»å¯¼èˆª</div>
    <div class="category-nav">
      <div class="category-item">åŠ¨ä½œ</div>
      <div class="category-item">ç›Šæ™º</div>
      <div class="category-item">ä¼‘é—²</div>
      <div class="category-item">å†’é™©</div>
      <div class="category-item">ç­–ç•¥</div>
      <div class="category-item">ä½“è‚²</div>
      <div class="category-item">ç«é€Ÿ</div>
      <div class="category-item">è§’è‰²æ‰®æ¼”</div>
      <div class="category-item">æ¨¡æ‹Ÿ</div>
      <div class="category-item">å…¶ä»–</div>
    </div>
  </section>

  <section class="section">
    <div class="section-title">ğŸŒŸ ä¸“é¢˜æ´»åŠ¨</div>
    <div class="game-list">
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="topic1">
        <div class="game-title">å¤æ—¥éœ“è™¹èŠ‚</div>
        <div class="game-tags"><span class="game-tag">ä¸“é¢˜</span><span class="game-tag">é™æ—¶æ´»åŠ¨</span></div>
        <button class="game-btn">æŸ¥çœ‹è¯¦æƒ…</button>
      </div>
      <div class="game-card">
        <img class="game-thumb" src="https://images.unsplash.com/photo-1465101178521-c1a9136a3b99?auto=format&fit=crop&w=400&q=80" alt="topic2">
        <div class="game-title">æœªæ¥ç§‘æŠ€å‘¨</div>
        <div class="game-tags"><span class="game-tag">ä¸“é¢˜</span><span class="game-tag">ç§‘æŠ€</span></div>
        <button class="game-btn">æŸ¥çœ‹è¯¦æƒ…</button>
      </div>
    </div>
  </section>

  <footer>
    &copy; 2024 CYBERGAMES. èµ›åšæœ‹å…‹å°æ¸¸æˆç«™ | è”ç³»æ–¹å¼ï¼šhi@cybergames.com
  </footer>

  <div id="loginModal" style="display:none;position:fixed;z-index:1000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.55);align-items:center;justify-content:center;">
    <div style="background:#181a24;padding:32px 28px 24px 28px;border-radius:18px;box-shadow:0 0 24px #1de9b6a0;min-width:320px;max-width:90vw;position:relative;">
      <div id="loginTab" style="display:flex;justify-content:center;gap:24px;margin-bottom:18px;">
        <span id="tabLogin" style="cursor:pointer;color:#1de9b6;font-weight:bold;">ç™»å½•</span>
        <span id="tabRegister" style="cursor:pointer;color:#888;">æ³¨å†Œ</span>
      </div>
      <div id="formLogin">
        <input id="emailInput" type="email" placeholder="é‚®ç®±" style="width:100%;margin-bottom:12px;padding:10px 12px;border-radius:8px;border:none;font-size:1rem;outline:none;">
        <input id="pwdInput" type="password" placeholder="å¯†ç " style="width:100%;margin-bottom:12px;padding:10px 12px;border-radius:8px;border:none;font-size:1rem;outline:none;">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;">
          <label style="color:#aaa;font-size:0.95rem;"><input type="checkbox" id="rememberMe"> è®°ä½ç™»å½•</label>
          <span id="forgetPwd" style="color:#536dfe;cursor:pointer;font-size:0.95rem;">å¿˜è®°å¯†ç ï¼Ÿ</span>
        </div>
        <div id="loginError" style="color:#ff4081;font-size:0.95rem;margin-bottom:8px;display:none;"></div>
        <button id="doLogin" style="width:100%;background:linear-gradient(90deg,#536dfe 10%,#1de9b6 90%);color:#fff;border:none;border-radius:8px;padding:10px 0;font-size:1.1rem;font-weight:bold;box-shadow:0 0 8px #1de9b6a0;cursor:pointer;">ç™»å½•</button>
        
        <div style="margin-top:16px;text-align:center;color:#aaa;position:relative;">
          <span style="position:relative;z-index:1;background:#181a24;padding:0 10px;">æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹è´¦å·ç™»å½•</span>
          <div style="position:absolute;top:50%;left:0;right:0;height:1px;background:#333;z-index:0;"></div>
        </div>
        
        <div style="display:flex;gap:12px;margin-top:16px;">
          <button id="githubLogin" style="flex:1;background:#24292e;color:#fff;border:none;border-radius:8px;padding:8px 0;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;">
            <svg style="width:24px;height:24px;margin-right:8px;" viewBox="0 0 24 24">
              <path fill="#fff" d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
            </svg>
            GitHub
          </button>
          <button id="googleLogin" style="flex:1;background:#fff;color:#444;border:none;border-radius:8px;padding:8px 0;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;">
            <svg style="width:24px;height:24px;margin-right:8px;" viewBox="0 0 24 24">
              <path fill="#EA4335" d="M5.26620003,9.76452941 C6.19878754,6.93863203 8.85444915,4.90909091 12,4.90909091 C13.6909091,4.90909091 15.2181818,5.50909091 16.4181818,6.49090909 L19.9090909,3 C17.7818182,1.14545455 15.0545455,0 12,0 C7.27006974,0 3.1977497,2.69829785 1.23999023,6.65002441 L5.26620003,9.76452941 Z" />
              <path fill="#34A853" d="M16.0407269,18.0125889 C14.9509167,18.7163016 13.5660892,19.0909091 12,19.0909091 C8.86648613,19.0909091 6.21911939,17.076871 5.27698177,14.2678769 L1.23746264,17.3349879 C3.19279051,21.2936293 7.26500293,24 12,24 C14.9328362,24 17.7353462,22.9573905 19.834192,20.9995801 L16.0407269,18.0125889 Z" />
              <path fill="#4A90E2" d="M19.834192,20.9995801 C22.0291676,18.9520994 23.4545455,15.903663 23.4545455,12 C23.4545455,11.2909091 23.3454545,10.5272727 23.1818182,9.81818182 L12,9.81818182 L12,14.4545455 L18.4363636,14.4545455 C18.1187732,16.013626 17.2662994,17.2212117 16.0407269,18.0125889 L19.834192,20.9995801 Z" />
              <path fill="#FBBC05" d="M5.27698177,14.2678769 C5.03832634,13.556323 4.90909091,12.7937589 4.90909091,12 C4.90909091,11.2182781 5.03443647,10.4668121 5.26620003,9.76452941 L1.23999023,6.65002441 C0.43658717,8.26043162 0,10.0753848 0,12 C0,13.9195484 0.444780743,15.7301709 1.23746264,17.3349879 L5.27698177,14.2678769 Z" />
            </svg>
            Google
          </button>
        </div>
      </div>
      <div id="formRegister" style="display:none;">
        <input id="regEmail" type="email" placeholder="é‚®ç®±" style="width:100%;margin-bottom:12px;padding:10px 12px;border-radius:8px;border:none;font-size:1rem;outline:none;">
        <input id="regPwd" type="password" placeholder="å¯†ç ï¼ˆ6ä½ä»¥ä¸Šï¼‰" style="width:100%;margin-bottom:12px;padding:10px 12px;border-radius:8px;border:none;font-size:1rem;outline:none;">
        <input id="regPwd2" type="password" placeholder="ç¡®è®¤å¯†ç " style="width:100%;margin-bottom:12px;padding:10px 12px;border-radius:8px;border:none;font-size:1rem;outline:none;">
        <div id="regError" style="color:#ff4081;font-size:0.95rem;margin-bottom:8px;display:none;"></div>
        <button id="doRegister" style="width:100%;background:linear-gradient(90deg,#536dfe 10%,#1de9b6 90%);color:#fff;border:none;border-radius:8px;padding:10px 0;font-size:1.1rem;font-weight:bold;box-shadow:0 0 8px #1de9b6a0;cursor:pointer;">æ³¨å†Œ</button>
      </div>
      <div id="formForget" style="display:none;">
        <input id="forgetEmail" type="email" placeholder="è¯·è¾“å…¥æ³¨å†Œé‚®ç®±" style="width:100%;margin-bottom:12px;padding:10px 12px;border-radius:8px;border:none;font-size:1rem;outline:none;">
        <div id="forgetMsg" style="color:#1de9b6;font-size:0.95rem;margin-bottom:8px;display:none;"></div>
        <button id="doForget" style="width:100%;background:linear-gradient(90deg,#536dfe 10%,#1de9b6 90%);color:#fff;border:none;border-radius:8px;padding:10px 0;font-size:1.1rem;font-weight:bold;box-shadow:0 0 8px #1de9b6a0;cursor:pointer;">å‘é€é‡ç½®é“¾æ¥</button>
      </div>
      <button id="closeModal" style="position:absolute;top:8px;right:12px;background:none;border:none;font-size:1.3rem;color:#888;cursor:pointer;">Ã—</button>
    </div>
  </div>

  <script>
    // APIé…ç½®
    const isProduction = window.location.hostname === 'on91.asia' || window.location.hostname.includes('.on91.asia');
    const API_BASE_URL = isProduction ? '/api' : 'http://localhost:5000/api';
    
    const API = {
      login: `${API_BASE_URL}/auth/login`,
      register: `${API_BASE_URL}/auth/register`,
      githubLogin: `${API_BASE_URL}/auth/github`,
      googleLogin: `${API_BASE_URL}/auth/google`,
      validateToken: `${API_BASE_URL}/user/validate-token`,
      userProfile: `${API_BASE_URL}/user/profile`
    };
    
    // HTTPè¯·æ±‚å·¥å…·
    function getAuthHeader() {
      const token = localStorage.getItem('auth_token');
      return token ? { 'Authorization': `Bearer ${token}` } : {};
    }
    
    async function apiRequest(url, options = {}) {
      const headers = {
        'Content-Type': 'application/json',
        ...getAuthHeader(),
        ...options.headers
      };
      
      try {
        const response = await fetch(url, {
          ...options,
          headers
        });
        
        // å¤„ç†401é”™è¯¯ï¼ˆæœªæˆæƒï¼‰
        if (response.status === 401) {
          // æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„å‡­è¯
          localStorage.removeItem('auth_token');
          localStorage.removeItem('cybergames_user');
          // æ›´æ–°UIä¸ºæœªç™»å½•çŠ¶æ€
          const loginBtn = document.getElementById('loginBtn');
          if (loginBtn) loginBtn.textContent = 'ç™»å½•/æ³¨å†Œ';
          throw new Error('ä¼šè¯å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
        }
        
        return response;
      } catch (error) {
        console.error('APIè¯·æ±‚é”™è¯¯:', error);
        throw error;
      }
    }

    // æ˜Ÿç©ºèƒŒæ™¯åŠ¨ç”»
    const canvas = document.getElementById('star-bg');
    const ctx = canvas.getContext('2d');
    let stars = [];
    const STAR_NUM = 500; // æ˜Ÿæ˜Ÿæ•°é‡å¢åŠ 
    const STAR_COLOR = 'rgba(255,255,255,0.88)';
    const STAR_MIN_SIZE = 0.5;
    const STAR_MAX_SIZE = 2.2;
    const STAR_SPEED = 0.18;

    // é¼ æ ‡å½±å“å‚æ•°
    let mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
    let driftTarget = { x: 0, y: 0 };
    let driftCurrent = { x: 0, y: 0 };

    // æ˜Ÿäº‘å‚æ•°ï¼ˆæ›´æ˜æ˜¾æ›´é¥±å’Œï¼‰
    function drawNebula() {
      // æ˜Ÿäº‘1
      let nebula1 = ctx.createRadialGradient(
        canvas.width * 0.25, canvas.height * 0.38, 0,
        canvas.width * 0.25, canvas.height * 0.38, canvas.width * 0.7
      );
      nebula1.addColorStop(0, 'rgba(120,80,255,0.32)');
      nebula1.addColorStop(0.4, 'rgba(60,120,255,0.18)');
      nebula1.addColorStop(0.8, 'rgba(0,0,0,0)');
      ctx.save();
      ctx.globalAlpha = 0.85;
      ctx.beginPath();
      ctx.arc(canvas.width * 0.25, canvas.height * 0.38, canvas.width * 0.7, 0, 2 * Math.PI);
      ctx.closePath();
      ctx.fillStyle = nebula1;
      ctx.fill();
      ctx.restore();
      // æ˜Ÿäº‘2
      let nebula2 = ctx.createRadialGradient(
        canvas.width * 0.7, canvas.height * 0.7, 0,
        canvas.width * 0.7, canvas.height * 0.7, canvas.width * 0.55
      );
      nebula2.addColorStop(0, 'rgba(255,60,255,0.22)');
      nebula2.addColorStop(0.3, 'rgba(60,255,255,0.13)');
      nebula2.addColorStop(0.8, 'rgba(0,0,0,0)');
      ctx.save();
      ctx.globalAlpha = 0.7;
      ctx.beginPath();
      ctx.arc(canvas.width * 0.7, canvas.height * 0.7, canvas.width * 0.55, 0, 2 * Math.PI);
      ctx.closePath();
      ctx.fillStyle = nebula2;
      ctx.fill();
      ctx.restore();
      // æ˜Ÿäº‘3ï¼ˆè“ç´«æ¸å˜ï¼‰
      let nebula3 = ctx.createRadialGradient(
        canvas.width * 0.5, canvas.height * 0.8, 0,
        canvas.width * 0.5, canvas.height * 0.8, canvas.width * 0.4
      );
      nebula3.addColorStop(0, 'rgba(80,180,255,0.18)');
      nebula3.addColorStop(0.5, 'rgba(120,80,255,0.12)');
      nebula3.addColorStop(1, 'rgba(0,0,0,0)');
      ctx.save();
      ctx.globalAlpha = 0.5;
      ctx.beginPath();
      ctx.arc(canvas.width * 0.5, canvas.height * 0.8, canvas.width * 0.4, 0, 2 * Math.PI);
      ctx.closePath();
      ctx.fillStyle = nebula3;
      ctx.fill();
      ctx.restore();
    }

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    function randomStar() {
      return {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: STAR_MIN_SIZE + Math.random() * (STAR_MAX_SIZE - STAR_MIN_SIZE),
        speed: STAR_SPEED + Math.random() * 0.15,
        alpha: 0.5 + Math.random() * 0.5,
        drift: (Math.random() - 0.5) * 0.18,
        flickerSeed: Math.random() * Math.PI * 2,
        flickerSpeed: 0.8 + Math.random() * 1.2
      };
    }

    function createStars() {
      stars = [];
      for (let i = 0; i < STAR_NUM; i++) {
        stars.push(randomStar());
      }
    }

    function drawStars(time) {
      for (let star of stars) {
        ctx.save();
        let flicker = 0.6 + 0.4 * Math.abs(Math.sin(time * 0.001 * star.flickerSpeed + star.flickerSeed));
        ctx.globalAlpha = star.alpha * flicker;
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.size, 0, 2 * Math.PI);
        ctx.fillStyle = STAR_COLOR;
        ctx.shadowColor = '#fff';
        ctx.shadowBlur = 10 * flicker;
        ctx.fill();
        ctx.restore();
      }
    }

    function animateStars(time) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawNebula();
      // é¼ æ ‡å½±å“æ•´ä½“æ¼‚ç§»
      driftTarget.x = (mouse.x - canvas.width / 2) * 0.0007;
      driftTarget.y = (mouse.y - canvas.height / 2) * 0.0007;
      // ç¼“æ…¢æ’å€¼
      driftCurrent.x += (driftTarget.x - driftCurrent.x) * 0.03;
      driftCurrent.y += (driftTarget.y - driftCurrent.y) * 0.03;
      for (let star of stars) {
        star.y += star.speed + driftCurrent.y * 30;
        star.x += star.drift + driftCurrent.x * 30;
        star.size += (Math.random() - 0.5) * 0.01;
        star.size = Math.max(STAR_MIN_SIZE, Math.min(STAR_MAX_SIZE, star.size));
        if (star.y > canvas.height + 2) {
          star.x = Math.random() * canvas.width;
          star.y = -2;
        }
        if (star.x < -2) star.x = canvas.width + 2;
        if (star.x > canvas.width + 2) star.x = -2;
      }
      drawStars(time);
      requestAnimationFrame(animateStars);
    }

    function initStars() {
      resizeCanvas();
      createStars();
      drawNebula();
      drawStars(0);
      animateStars(0);
    }

    window.addEventListener('resize', () => {
      resizeCanvas();
      createStars();
    });

    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    window.addEventListener('touchmove', e => {
      if (e.touches && e.touches.length > 0) {
        mouse.x = e.touches[0].clientX;
        mouse.y = e.touches[0].clientY;
      }
    });

    window.addEventListener('DOMContentLoaded', initStars);

    // ç™»å½•æ³¨å†Œå¼¹çª—é€»è¾‘
    const loginBtn = document.getElementById('loginBtn');
    const loginModal = document.getElementById('loginModal');
    const closeModal = document.getElementById('closeModal');
    const tabLogin = document.getElementById('tabLogin');
    const tabRegister = document.getElementById('tabRegister');
    const formLogin = document.getElementById('formLogin');
    const formRegister = document.getElementById('formRegister');
    const formForget = document.getElementById('formForget');
    const doLogin = document.getElementById('doLogin');
    const doRegister = document.getElementById('doRegister');
    const doForget = document.getElementById('doForget');
    const emailInput = document.getElementById('emailInput');
    const pwdInput = document.getElementById('pwdInput');
    const regEmail = document.getElementById('regEmail');
    const regPwd = document.getElementById('regPwd');
    const regPwd2 = document.getElementById('regPwd2');
    const rememberMe = document.getElementById('rememberMe');
    const loginError = document.getElementById('loginError');
    const regError = document.getElementById('regError');
    const forgetPwd = document.getElementById('forgetPwd');
    const forgetEmail = document.getElementById('forgetEmail');
    const forgetMsg = document.getElementById('forgetMsg');
    const githubLogin = document.getElementById('githubLogin');
    const googleLogin = document.getElementById('googleLogin');

    // åˆ‡æ¢tab
    tabLogin.onclick = () => {
      tabLogin.style.color = '#1de9b6';
      tabRegister.style.color = '#888';
      formLogin.style.display = '';
      formRegister.style.display = 'none';
      formForget.style.display = 'none';
      loginError.style.display = 'none';
      regError.style.display = 'none';
    };
    tabRegister.onclick = () => {
      tabLogin.style.color = '#888';
      tabRegister.style.color = '#1de9b6';
      formLogin.style.display = 'none';
      formRegister.style.display = '';
      formForget.style.display = 'none';
      loginError.style.display = 'none';
      regError.style.display = 'none';
    };
    forgetPwd.onclick = () => {
      formLogin.style.display = 'none';
      formRegister.style.display = 'none';
      formForget.style.display = '';
      forgetMsg.style.display = 'none';
    };
    // å…³é—­å¼¹çª—
    closeModal.onclick = () => loginModal.style.display = 'none';
    loginModal.onclick = e => { if (e.target === loginModal) loginModal.style.display = 'none'; };
    // æ‰“å¼€å¼¹çª—
    loginBtn.onclick = () => {
      loginModal.style.display = 'flex';
      tabLogin.onclick();
      emailInput.value = '';
      pwdInput.value = '';
      regEmail.value = '';
      regPwd.value = '';
      regPwd2.value = '';
      forgetEmail.value = '';
    };
    // æ ¡éªŒé‚®ç®±
    function checkEmail(email) {
      return /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email);
    }
    
    // ç™»å½• - ä¿®æ”¹ä¸ºå®é™…APIè°ƒç”¨
    doLogin.onclick = async () => {
      const email = emailInput.value.trim();
      const pwd = pwdInput.value;
      loginError.style.display = 'none';
      
      // è¡¨å•éªŒè¯
      if (!checkEmail(email)) {
        loginError.textContent = 'è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€';
        loginError.style.display = '';
        return;
      }
      if (!pwd || pwd.length < 6) {
        loginError.textContent = 'å¯†ç ä¸èƒ½å°‘äº6ä½';
        loginError.style.display = '';
        return;
      }
      
      // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
      doLogin.disabled = true;
      doLogin.textContent = 'ç™»å½•ä¸­...';
      
      try {
        const response = await fetch(API.login, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ email, password: pwd })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
          // å¤„ç†é”™è¯¯
          loginError.textContent = data.message || 'ç™»å½•å¤±è´¥';
          loginError.style.display = '';
          return;
        }
        
        // ç™»å½•æˆåŠŸï¼Œä¿å­˜tokenå’Œç”¨æˆ·ä¿¡æ¯
        localStorage.setItem('auth_token', data.token);
        localStorage.setItem('cybergames_user', data.user.email);
        localStorage.setItem('user_profile', JSON.stringify(data.user));
        
        // è®°ä½ç™»å½•ï¼ˆå¯é€‰ï¼‰
      if (rememberMe.checked) {
          localStorage.setItem('remember_email', email);
      } else {
          localStorage.removeItem('remember_email');
      }
        
        // æ›´æ–°UI
        loginBtn.textContent = `æ¬¢è¿ï¼Œ${data.user.name || data.user.email}`;
      loginModal.style.display = 'none';
        
        // ç™»å½•åè·³è½¬
        afterLoginJump();
      } catch (error) {
        console.error('ç™»å½•é”™è¯¯:', error);
        loginError.textContent = 'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•';
        loginError.style.display = '';
      } finally {
        doLogin.disabled = false;
        doLogin.textContent = 'ç™»å½•';
      }
    };
    
    // æ³¨å†Œ - ä¿®æ”¹ä¸ºå®é™…APIè°ƒç”¨
    doRegister.onclick = async () => {
      const email = regEmail.value.trim();
      const pwd = regPwd.value;
      const pwd2 = regPwd2.value;
      regError.style.display = 'none';
      
      // è¡¨å•éªŒè¯
      if (!checkEmail(email)) {
        regError.textContent = 'è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€';
        regError.style.display = '';
        return;
      }
      if (!pwd || pwd.length < 6) {
        regError.textContent = 'å¯†ç ä¸èƒ½å°‘äº6ä½';
        regError.style.display = '';
        return;
      }
      if (pwd !== pwd2) {
        regError.textContent = 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´';
        regError.style.display = '';
        return;
      }
      
      // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
      doRegister.disabled = true;
      doRegister.textContent = 'æ³¨å†Œä¸­...';
      
      try {
        const response = await fetch(API.register, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ 
            name: email.split('@')[0], // é»˜è®¤ç”¨æˆ·å
            email, 
            password: pwd 
          })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
          // å¤„ç†é”™è¯¯
          regError.textContent = data.message || 'æ³¨å†Œå¤±è´¥';
          regError.style.display = '';
          return;
        }
        
        // æ³¨å†ŒæˆåŠŸï¼Œä¿å­˜tokenå’Œç”¨æˆ·ä¿¡æ¯
        localStorage.setItem('auth_token', data.token);
        localStorage.setItem('cybergames_user', data.user.email);
        localStorage.setItem('user_profile', JSON.stringify(data.user));
        
        // æ›´æ–°UI
        loginBtn.textContent = `æ¬¢è¿ï¼Œ${data.user.name || data.user.email}`;
      loginModal.style.display = 'none';
        
        // æ³¨å†Œåè·³è½¬
        afterLoginJump();
      } catch (error) {
        console.error('æ³¨å†Œé”™è¯¯:', error);
        regError.textContent = 'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•';
        regError.style.display = '';
      } finally {
        doRegister.disabled = false;
        doRegister.textContent = 'æ³¨å†Œ';
      }
    };
    
    // å¿˜è®°å¯†ç 
    doForget.onclick = async () => {
      const email = forgetEmail.value.trim();
      forgetMsg.style.display = 'none';
      
      if (!checkEmail(email)) {
        forgetMsg.textContent = 'è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€';
        forgetMsg.style.color = '#ff4081';
        forgetMsg.style.display = '';
        return;
      }
      
      // æ¨¡æ‹Ÿé‡ç½®å¯†ç è¯·æ±‚
      forgetMsg.textContent = 'é‡ç½®é“¾æ¥å·²å‘é€åˆ°é‚®ç®±ï¼ˆåç«¯æœªå®Œæˆæ­¤åŠŸèƒ½ï¼‰';
      forgetMsg.style.color = '#1de9b6';
      forgetMsg.style.display = '';
      
      // çœŸå®å®ç°å¯æ·»åŠ ï¼š
      /*
      try {
        const response = await fetch(`${API_BASE_URL}/auth/forgot-password`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email })
        });
        
        const data = await response.json();
        
        if (!response.ok) {
          forgetMsg.textContent = data.message || 'å‘é€å¤±è´¥';
          forgetMsg.style.color = '#ff4081';
        } else {
          forgetMsg.textContent = 'é‡ç½®é“¾æ¥å·²å‘é€åˆ°é‚®ç®±';
          forgetMsg.style.color = '#1de9b6';
        }
      } catch (error) {
        console.error('å¿˜è®°å¯†ç é”™è¯¯:', error);
        forgetMsg.textContent = 'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•';
        forgetMsg.style.color = '#ff4081';
      }
      */
    };
    
    // è‡ªåŠ¨è®°ä½ç™»å½•ï¼Œæ£€æŸ¥ä»¤ç‰Œæœ‰æ•ˆæ€§
    async function validateToken() {
      const token = localStorage.getItem('auth_token');
      if (!token) return false;
      
      try {
        const response = await fetch(API.validateToken, {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });
        
        return response.ok;
      } catch (error) {
        console.error('ä»¤ç‰ŒéªŒè¯é”™è¯¯:', error);
        return false;
      }
    }
    
    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç™»å½•çŠ¶æ€
    window.addEventListener('DOMContentLoaded', async () => {
      // å°è¯•æ¢å¤è®°ä½çš„ç™»å½•çŠ¶æ€
      const rememberedEmail = localStorage.getItem('remember_email');
      if (rememberedEmail) {
        emailInput.value = rememberedEmail;
        rememberMe.checked = true;
      }
    
      // æ£€æŸ¥å·²ç™»å½•çŠ¶æ€
      const userEmail = localStorage.getItem('cybergames_user');
      const token = localStorage.getItem('auth_token');
      
      if (userEmail && token) {
        // å…ˆæ˜¾ç¤ºå·²ç™»å½•çŠ¶æ€
        loginBtn.textContent = `æ¬¢è¿ï¼Œ${userEmail}`;
        
        // å¼‚æ­¥éªŒè¯ä»¤ç‰Œ
        const isValid = await validateToken().catch(() => false);
        if (!isValid) {
          // ä»¤ç‰Œæ— æ•ˆï¼Œæ¸…é™¤ç™»å½•çŠ¶æ€
          localStorage.removeItem('auth_token');
          localStorage.removeItem('cybergames_user');
          loginBtn.textContent = 'ç™»å½•/æ³¨å†Œ';
        }
      }
      
      // æ£€æŸ¥URLå‚æ•°ä¸­æ˜¯å¦æœ‰tokenå’Œuser (OAuthå›è°ƒ)
      const params = new URLSearchParams(window.location.search);
      const oauthToken = params.get('token');
      const userJson = params.get('user');
      
      if (oauthToken && userJson) {
        try {
          // è§£æuser JSON
          const userObj = JSON.parse(userJson);
          
          // å­˜å‚¨è®¤è¯ä¿¡æ¯
          localStorage.setItem('auth_token', oauthToken);
          localStorage.setItem('cybergames_user', userObj.email);
          localStorage.setItem('user_profile', userJson);
          
          // æ›´æ–°UI
          loginBtn.textContent = `æ¬¢è¿ï¼Œ${userObj.name || userObj.email}`;
          
          // æ¸…é™¤URLå‚æ•°
          window.history.replaceState({}, document.title, window.location.pathname);
          
          // å¦‚æœæœ‰å¾…è·³è½¬çš„æ¸¸æˆï¼Œåˆ™æ¢å¤è·³è½¬
          checkPendingGameAfterOAuth();
        } catch (error) {
          console.error('è§£æç”¨æˆ·æ•°æ®å‡ºé”™:', error);
        }
      }
    });
    
    // é€€å‡ºç™»å½•
    loginBtn.addEventListener('contextmenu', e => {
      e.preventDefault();
      if (loginBtn.textContent.startsWith('æ¬¢è¿')) {
        localStorage.removeItem('auth_token');
        localStorage.removeItem('cybergames_user');
        localStorage.removeItem('user_profile');
        loginBtn.textContent = 'ç™»å½•/æ³¨å†Œ';
      }
    });

    // æ¸¸æˆå…¥å£å¼ºåˆ¶ç™»å½•é€»è¾‘
    let pendingGameUrl = null;
    function requireLoginThenGo(url) {
      const user = localStorage.getItem('cybergames_user');
      if (user) {
        window.open(url, '_blank');
      } else {
        pendingGameUrl = url;
        loginModal.style.display = 'flex';
        tabLogin.onclick();
      }
    }
    // ç»‘å®šæ‰€æœ‰æ¸¸æˆå…¥å£
    document.querySelectorAll('.game-btn, .game-list a').forEach(btn => {
      if (btn.tagName === 'A' && btn.href && btn.href.includes('games/')) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          requireLoginThenGo(this.getAttribute('href'));
        });
      } else if (btn.classList.contains('game-btn') && btn.textContent.includes('å¼€å§‹ç©')) {
        btn.addEventListener('click', function(e) {
          const link = this.closest('.game-card').querySelector('a[href*="games/"]');
          if (link) {
            e.preventDefault();
            requireLoginThenGo(link.getAttribute('href'));
          }
        });
      }
    });
    // ç™»å½•åè‡ªåŠ¨è·³è½¬
    function afterLoginJump() {
      if (pendingGameUrl) {
        window.open(pendingGameUrl, '_blank');
        pendingGameUrl = null;
      }
    }
    // åœ¨ç™»å½•å’Œæ³¨å†ŒæˆåŠŸåè°ƒç”¨
    const oldDoLogin = doLogin.onclick;
    doLogin.onclick = function() {
      oldDoLogin.call(this);
      setTimeout(afterLoginJump, 100);
    };
    const oldDoRegister = doRegister.onclick;
    doRegister.onclick = function() {
      oldDoRegister.call(this);
      setTimeout(afterLoginJump, 100);
    };

    // ç¬¬ä¸‰æ–¹ç™»å½• - ä¿®æ”¹ä¸ºå®é™…APIè°ƒç”¨
    githubLogin.onclick = () => {
      // ä¿å­˜å½“å‰å¯èƒ½éœ€è¦è·³è½¬çš„æ¸¸æˆURL
      if (pendingGameUrl) {
        localStorage.setItem('pendingGameUrl', pendingGameUrl);
      }
      
      // å®é™…ç¯å¢ƒè·³è½¬åˆ°GitHub OAuth
      window.location.href = API.githubLogin;
    };

    googleLogin.onclick = () => {
      // ä¿å­˜å½“å‰å¯èƒ½éœ€è¦è·³è½¬çš„æ¸¸æˆURL
      if (pendingGameUrl) {
        localStorage.setItem('pendingGameUrl', pendingGameUrl);
      }
      
      // å®é™…ç¯å¢ƒè·³è½¬åˆ°Google OAuth
      window.location.href = API.googleLogin;
    };
    
    // ä»OAuthç™»å½•åæ¢å¤å¯èƒ½çš„æ¸¸æˆè·³è½¬
    function checkPendingGameAfterOAuth() {
      const pendingGame = localStorage.getItem('pendingGameUrl');
      if (pendingGame) {
        window.open(pendingGame, '_blank');
        localStorage.removeItem('pendingGameUrl');
      }
    }
  </script>
</body>
</html>
